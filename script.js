// ===== CONFIGURAZIONE GIF ASIATICHE =====
const asianGifList = [
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/cina1.gif",
        obsUrl: "https://streamelements.com/overlay/67d99a72849145f544ef94cf/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/jap1.gif",
        obsUrl: "https://streamelements.com/overlay/67d99affe1732533b0687070/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/cina4.gif",
        obsUrl: "https://streamelements.com/overlay/67d99b69e1732533b0689927/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/jap2.gif",
        obsUrl: "https://streamelements.com/overlay/67d99c4667375fd89e883c6b/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/cina3.gif",
        obsUrl: "https://streamelements.com/overlay/67d99c989eb5cb5d3d2f7a94/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/jap3.gif",
        obsUrl: "https://streamelements.com/overlay/67d99d239eb5cb5d3d2fa0f7/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/cina2.gif",
        obsUrl: "https://streamelements.com/overlay/67d99dad6e2645d7d2aa54f2/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/asian%20gif/jap4.gif",
        obsUrl: "https://streamelements.com/overlay/67d99e1786f2e1e0efe5dddc/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    }
];

// ===== CONFIGURAZIONE GIF STANDARD =====
const gifList = [
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif1.gif",
        obsUrl: "https://streamelements.com/overlay/67c4d703ba79e601beb727ac/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif2.gif",
        obsUrl: "https://streamelements.com/overlay/67c4d76c9733efd5fbe5dd89/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif3.gif",
        obsUrl: "https://streamelements.com/overlay/67c4e04e29b98c5a5816fe26/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif4.gif",
        obsUrl: "https://streamelements.com/overlay/67c4e08688e40a6f4d932081/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif5.gif",
        obsUrl: "https://streamelements.com/overlay/67c4e22c586aed6967b99e08/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    },
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif12.gif",
        obsUrl: "https://streamelements.com/overlay/6809370b9774c3054f6d67a1/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    }, 
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif13.gif",
        obsUrl: "https://streamelements.com/overlay/680938b4adecf7dce8b71a2a/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    }, 
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif14.gif",
        obsUrl: "https://streamelements.com/overlay/680939039774c3054f6e46ec/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    }, 
    {
        preview: "https://raw.githubusercontent.com/ch3fCrack/assetoh2.0/main/gifs/gif15.gif",
        obsUrl: "https://streamelements.com/overlay/6809395d9774c3054f6e7845/_wWx9n2QwU4zKYil4BWDqZKNT9snXeat9bCDplNzG9YZ9agj"
    }
];

// ===== CONFIGURAZIONE PRESENTAZIONI BANNER =====
const presentations = [
    {
        containerId: "presentation1",
        images: ["banners/banner1.png", "banners/banner2.png", "banners/banner3.png"]
    },
    {
        containerId: "presentation2",
        images: ["banners/banner4.png", "banners/banner5.png", "banners/banner6.png", "banners/banner7.png", "banners/banner8.png", "banners/banner9.png", "banners/banner10.png", "banners/banner11.png", "banners/banner12.png", "banners/banner13.png", "banners/banner14.png", "banners/banner15.png"]
    },
    {
        containerId: "presentation3",
        images: ["banners/banner16.png", "banners/banner17.png", "banners/banner18.png", "banners/banner19.png", "banners/banner20.png", "banners/banner21.png", "banners/banner22.png", "banners/banner23.png"]
    },
    {
        containerId: "presentation4",
        images: ["banners/banner24.png", "banners/banner25.png", "banners/banner26.png", "banners/banner27.png", "banners/banner28.png", "banners/banner29.png"]
    },
    {
        containerId: "presentation5",
        images: ["banners/banner31.png", "banners/banner32.png", "banners/banner36.png"]
    },
    {
        containerId: "presentation6",
        images: ["banners/banner30.png", "banners/banner35.png", "banners/banner34.png"]
    },
    {
        containerId: "presentation7",
        images: ["banners/banner37.png", "banners/banner38.png", "banners/banner39.png"]
    },
    {
        containerId: "presentation8",
        images: ["banners/banner40.png", "banners/banner41.png", "banners/banner42.png"]
    },
    {
        containerId: "presentation9",
        images: ["banners/banner43.png", "banners/banner44.png", "banners/banner45.png", "banners/banner46.png", "banners/banner47.png", "banners/banner48.png"]
    },
    {
        containerId: "presentation10",
        images: ["banners/banner49.png", "banners/banner50.png", "banners/banner51.png", "banners/banner52.png", "banners/banner53.png", "banners/banner54.png"]
    },
    {
        containerId: "presentation11",
        images: ["banners/banner55.png", "banners/banner56.png", "banners/banner57.png"]
    },
    {
        containerId: "presentation12",
        images: ["banners/banner58.png", "banners/banner59.png", "banners/banner60.png"]
    },
    
    {
        containerId: "presentation14",
        images: ["banners/banner61.png", "banners/banner62.png", "banners/banner63.png"]
    },
    {
        containerId: "presentation15",
        images: ["banners/banner64.png", "banners/banner65.png", "banners/banner66.png"]
    },
    {
        containerId: "presentation16",
        images: [ "banners/banner67.png", "banners/banner68.png","banners/banner69.png","banners/banner70.png"]
    },
    {
        containerId: "presentation17",
        images: ["banners/banner71.png","banners/banner72.png", "banners/banner73.png", "banners/banner74.png"]
    },
    {
        containerId: "presentation18",
        images: ["banners/banner75.png","banners/banner76.png", "banners/banner77.png", "banners/banner78.png"]
    },
    {
        containerId: "presentation19",
        images: ["banners/banner79.png","banners/banner80.png", "banners/banner81.png", "banners/banner82.png"]
    },
    {
        containerId: "presentation13",
        images: ["banners/private/private-banner1.png", "banners/private/private-banner1.png"]
    }
];

// ===== CONFIGURAZIONE BANNER ASIATICI =====
const asianBannerPresentations = {
    asianPresentation1: {
        images: [
            "banners/asianbanner/banners1.png",
            "banners/asianbanner/banners2.png",
            "banners/asianbanner/banners3.png"
        ],
        currentIndex: 0
    },
    asianPresentation2: {
        images: [
            "banners/asianbanner/banners4.png",
            "banners/asianbanner/banners5.png",
            "banners/asianbanner/banners6.png"
        ],
        currentIndex: 0
    }
};
// ===== CONFIGURAZIONE BANNER PRIVATI =====
const privatePresentations = [
    {
        containerId: "presentation15",
        images: ["banners/private/private-banner1.png", "banners/private/private-banner1.png"]
    }
    // Aggiungi altre presentazioni private qui
];

// Aggiungi questa funzione dopo setupBannerPresentations()
function loadPrivateBanners() {
    const container = document.getElementById('privateBannerContainer');
    if (!container) return;

    privatePresentations.forEach((presentation, index) => {
        const presentationDiv = document.createElement('div');
        presentationDiv.id = presentation.containerId;
        presentationDiv.className = 'presentation';
        
        presentationDiv.innerHTML = `
            <img class="bannerImage" src="${presentation.images[0]}" alt="Private Banner">
            <div class="navigation">
                <button class="prevBtn">&lt;</button>
                <div class="dots">
                    ${presentation.images.map((_, i) => `
                        <span class="dot ${i === 0 ? 'active' : ''}"></span>
                    `).join('')}
                </div>
                <button class="nextBtn">&gt;</button>
            </div>
        `;
        
        container.appendChild(presentationDiv);
    });

    setupBannerPresentations();
}

// ===== FUNZIONI UTILITY =====
function loadGifs(container, list) {
    if (!container) return;
    
    list.forEach((gif, index) => {
        const div = document.createElement("div");
        div.classList.add("asset");
        div.innerHTML = `
            <img src="${gif.preview}" alt="GIF ${index + 1}">
            <button class="obs-btn" data-translate="copyForOBS" onclick="copyToOBS('${gif.obsUrl}')">Copy for OBS</button>
        `;
        container.appendChild(div);
    });

    // Update translations for new elements
    updatePageLanguage();
}

function copyToOBS(url) {
    navigator.clipboard.writeText(url).then(() => {
        const message = translations[currentLang].urlCopied || "URL copied for OBS";
        alert(message);
    });
}

// ===== GESTIONE PASSWORD =====
function setupPasswordProtection() {
    const passwordSection = document.getElementById("password-section");
    const protectedContent = document.getElementById("protected-content");
    const errorMessage = document.getElementById("error-message");
    const passwordInput = document.getElementById("passwordInput");

    if (!passwordInput) return;

    const correctPassword = "nuggets";

    window.checkPassword = function() {
        const userInput = passwordInput.value;
        if (userInput === correctPassword) {
            if (passwordSection) passwordSection.style.display = "none";
            if (protectedContent) protectedContent.style.display = "block";
            loadPrivateBanners();
        } else {
            if (errorMessage) errorMessage.style.display = "block";
        }
    };

    passwordInput.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            checkPassword();
        }
    });
}

// ===== GESTIONE BANNER =====
function setupBannerPresentations() {
    presentations.forEach(presentation => {
        const container = document.getElementById(presentation.containerId);
        if (!container) return;

        const bannerImage = container.querySelector(".bannerImage");
        const prevBtn = container.querySelector(".prevBtn");
        const nextBtn = container.querySelector(".nextBtn");
        const dots = container.querySelectorAll(".dot");
        let currentIndex = 0;

        function showBanner(index) {
            if (!bannerImage) return;
            bannerImage.src = presentation.images[index];
            dots.forEach((dot, i) => {
                dot.classList.toggle("active", i === index);
            });
        }

        if (prevBtn) {
            prevBtn.addEventListener("click", () => {
                currentIndex = (currentIndex > 0) ? currentIndex - 1 : presentation.images.length - 1;
                showBanner(currentIndex);
            });
        }

        if (nextBtn) {
            nextBtn.addEventListener("click", () => {
                currentIndex = (currentIndex < presentation.images.length - 1) ? currentIndex + 1 : 0;
                showBanner(currentIndex);
            });
        }

        dots.forEach((dot, index) => {
            dot.addEventListener("click", () => {
                currentIndex = index;
                showBanner(currentIndex);
            });
        });

        showBanner(currentIndex);
    });
}

// ===== GESTIONE BANNER ASIATICI =====
function setupAsianBanners() {
    for (const presentationId in asianBannerPresentations) {
        const presentation = document.getElementById(presentationId);
        if (!presentation) continue;

        const bannerImage = presentation.querySelector(".bannerImage");
        const prevBtn = presentation.querySelector(".prevBtn");
        const nextBtn = presentation.querySelector(".nextBtn");
        const dots = presentation.querySelectorAll(".dot");

        if (bannerImage) {
            bannerImage.src = asianBannerPresentations[presentationId].images[0];
        }

        function updateDisplay(newIndex) {
            if (!bannerImage) return;
            asianBannerPresentations[presentationId].currentIndex = newIndex;
            bannerImage.src = asianBannerPresentations[presentationId].images[newIndex];
            dots.forEach((dot, index) => {
                dot.classList.toggle("active", index === newIndex);
            });
        }

        if (prevBtn) {
            prevBtn.addEventListener("click", () => {
                const currentIndex = asianBannerPresentations[presentationId].currentIndex;
                const newIndex = (currentIndex - 1 + asianBannerPresentations[presentationId].images.length) % asianBannerPresentations[presentationId].images.length;
                updateDisplay(newIndex);
            });
        }

        if (nextBtn) {
            nextBtn.addEventListener("click", () => {
                const currentIndex = asianBannerPresentations[presentationId].currentIndex;
                const newIndex = (currentIndex + 1) % asianBannerPresentations[presentationId].images.length;
                updateDisplay(newIndex);
            });
        }

        dots.forEach((dot, index) => {
            dot.addEventListener("click", () => updateDisplay(index));
        });
    }
}

// ===== GESTIONE PAYPAL =====
function setupPayPal() {
    const paypalButton = document.getElementById("copyPaypal");
    if (!paypalButton) return;

    paypalButton.addEventListener("click", () => {
        const paypalEmail = "Ch3fcrack2@outlook.it";
        navigator.clipboard.writeText(paypalEmail).then(() => {
            const message = translations[currentLang].paypalCopied || "PayPal email copied: ";
            alert(message + paypalEmail);
        });
    });
}

// ===== INIZIALIZZAZIONE =====
document.addEventListener("DOMContentLoaded", () => {
    const currentPage = window.location.pathname.split('/').pop();

    // Caricamento GIF
    loadGifs(document.getElementById("asianGifContainer"), asianGifList);
    loadGifs(document.getElementById("gifContainer"), gifList);

    // Setup Banner
    setupBannerPresentations();

    // Setup Banner Asiatici
    if (document.querySelector(".banners-page")) {
        setupAsianBanners();
    }

    // Setup Password Protection
    setupPasswordProtection();

    // Setup PayPal
    setupPayPal();
});

// Esporta funzioni necessarie globalmente
window.copyToOBS = copyToOBS;